<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onboarding Design C - Card Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        :root {
            --background: #0a0a0a;
            --background-card: #171717;
            --background-secondary: #262626;
            --foreground: #fafafa;
            --foreground-muted: #737373;
            --primary: #00d4ff;
            --success: #22c55e;
            --warning: #eab308;
            --destructive: #ef4444;
            --violet: #a855f7;
            --blue: #3b82f6;
            --amber: #eab308;
            --border: #404040;
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--background);
            color: var(--foreground);
            margin: 0;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--background); }
        ::-webkit-scrollbar-thumb { background: var(--background-secondary); border-radius: 3px; }

        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; }
        input[type="number"] { -moz-appearance: textfield; }

        input[type="date"]::-webkit-calendar-picker-indicator {
            filter: invert(1);
            cursor: pointer;
            padding: 12px;
            margin-right: -8px;
        }

        /* Card animations */
        .question-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center center;
        }
        .question-card.answered {
            opacity: 0.6;
            transform: scale(0.98);
        }
        .question-card.answered:hover {
            opacity: 1;
            transform: scale(1);
        }
        .question-card.current {
            box-shadow: 0 0 0 2px var(--primary), 0 20px 40px -10px rgba(0, 212, 255, 0.15);
        }

        /* Smooth scroll */
        html { scroll-behavior: smooth; }

        /* Pulse animation for current question */
        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0 rgba(0, 212, 255, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(0, 212, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 212, 255, 0); }
        }
        .pulse { animation: pulse-ring 2s infinite; }

        /* Selection hover effects */
        .option-btn {
            transition: all 0.2s ease;
        }
        .option-btn:hover {
            transform: translateY(-2px);
        }
        .option-btn.selected {
            transform: translateY(0);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: { DEFAULT: '#0a0a0a', card: '#171717', secondary: '#262626' },
                        foreground: { DEFAULT: '#fafafa', muted: '#737373' },
                        primary: '#00d4ff',
                        success: '#22c55e',
                        warning: '#eab308',
                        destructive: '#ef4444',
                        violet: '#a855f7',
                        blue: '#3b82f6',
                        amber: '#eab308',
                        border: '#404040',
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div class="min-h-screen pb-32">
        <!-- Minimal Header -->
        <header class="sticky top-0 z-50 bg-background/95 backdrop-blur border-b border-border/30">
            <div class="max-w-lg mx-auto px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg bg-primary/20 flex items-center justify-center">
                        <i data-lucide="activity" class="w-4 h-4 text-primary"></i>
                    </div>
                    <span class="font-semibold text-sm">Setup</span>
                </div>
                <div class="flex items-center gap-3">
                    <span class="text-xs text-foreground-muted" id="question-counter">1 of 9</span>
                    <div class="flex gap-1" id="dot-progress">
                        <!-- Dynamic dots -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content - Conversational Cards -->
        <main class="max-w-lg mx-auto px-4 py-6 space-y-4">
            <!-- Q1: Age -->
            <div class="question-card current pulse bg-background-card rounded-2xl p-5 border border-border" data-q="1" id="q1">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-primary/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="cake" class="w-6 h-6 text-primary"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">How old are you?</h2>
                        <p class="text-sm text-foreground-muted mt-1">This helps us provide personalized insights</p>
                    </div>
                </div>
                <div class="relative">
                    <input type="number" id="age-input" placeholder="Enter your age" min="18" max="120" autofocus
                        class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-primary transition-all">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted">years</span>
                </div>
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-primary/10 text-primary font-medium border border-primary/30 hover:bg-primary/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="2">
                    Continue
                </button>
            </div>

            <!-- Q2: Gender -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="2" id="q2">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-blue/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="users" class="w-6 h-6 text-blue"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">What's your gender?</h2>
                        <p class="text-sm text-foreground-muted mt-1">Used for BMI calculations</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <button class="option-btn gender-opt px-4 py-4 rounded-xl border-2 border-border bg-background text-foreground-muted hover:border-blue/50 hover:text-foreground transition-all flex items-center gap-3" data-value="male">
                        <div class="w-10 h-10 rounded-full bg-blue/15 flex items-center justify-center">
                            <i data-lucide="user" class="w-5 h-5 text-blue"></i>
                        </div>
                        <span class="font-medium">Male</span>
                    </button>
                    <button class="option-btn gender-opt px-4 py-4 rounded-xl border-2 border-border bg-background text-foreground-muted hover:border-pink-500/50 hover:text-foreground transition-all flex items-center gap-3" data-value="female">
                        <div class="w-10 h-10 rounded-full bg-pink-500/15 flex items-center justify-center">
                            <i data-lucide="user" class="w-5 h-5 text-pink-500"></i>
                        </div>
                        <span class="font-medium">Female</span>
                    </button>
                    <button class="option-btn gender-opt px-4 py-4 rounded-xl border-2 border-border bg-background text-foreground-muted hover:border-violet/50 hover:text-foreground transition-all flex items-center gap-3" data-value="non-binary">
                        <div class="w-10 h-10 rounded-full bg-violet/15 flex items-center justify-center">
                            <i data-lucide="sparkles" class="w-5 h-5 text-violet"></i>
                        </div>
                        <span class="font-medium">Non-binary</span>
                    </button>
                    <button class="option-btn gender-opt px-4 py-4 rounded-xl border-2 border-border bg-background text-foreground-muted hover:border-amber/50 hover:text-foreground transition-all flex items-center gap-3" data-value="other">
                        <div class="w-10 h-10 rounded-full bg-amber/15 flex items-center justify-center">
                            <i data-lucide="heart" class="w-5 h-5 text-amber"></i>
                        </div>
                        <span class="font-medium">Other</span>
                    </button>
                </div>
            </div>

            <!-- Q3: Height -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="3" id="q3">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-success/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="ruler" class="w-6 h-6 text-success"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">How tall are you?</h2>
                        <p class="text-sm text-foreground-muted mt-1">We'll calculate your BMI for you</p>
                    </div>
                </div>
                <div class="flex gap-2 mb-3">
                    <button class="height-toggle flex-1 py-2 rounded-lg text-sm font-medium bg-primary text-background" data-unit="cm">Centimeters</button>
                    <button class="height-toggle flex-1 py-2 rounded-lg text-sm font-medium bg-background-secondary text-foreground-muted" data-unit="ft">Feet & Inches</button>
                </div>
                <div id="height-cm-input">
                    <div class="relative">
                        <input type="number" id="height-input" placeholder="175" min="100" max="250"
                            class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-success transition-all">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted">cm</span>
                    </div>
                </div>
                <div id="height-ft-input" class="hidden grid grid-cols-2 gap-3">
                    <div class="relative">
                        <input type="number" placeholder="5" min="3" max="8"
                            class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-success transition-all">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted">ft</span>
                    </div>
                    <div class="relative">
                        <input type="number" placeholder="8" min="0" max="11"
                            class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-success transition-all">
                        <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted">in</span>
                    </div>
                </div>
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-success/10 text-success font-medium border border-success/30 hover:bg-success/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="4">
                    Continue
                </button>
            </div>

            <!-- Q4: Starting Weight -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="4" id="q4">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-warning/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="scale" class="w-6 h-6 text-warning"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">What's your current weight?</h2>
                        <p class="text-sm text-foreground-muted mt-1">Your starting point for tracking progress</p>
                    </div>
                </div>
                <div class="flex gap-2 mb-3">
                    <button class="weight-toggle flex-1 py-2 rounded-lg text-sm font-medium bg-primary text-background" data-unit="kg">Kilograms</button>
                    <button class="weight-toggle flex-1 py-2 rounded-lg text-sm font-medium bg-background-secondary text-foreground-muted" data-unit="lbs">Pounds</button>
                </div>
                <div class="relative">
                    <input type="number" id="start-weight-input" placeholder="85" step="0.1"
                        class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-warning transition-all">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted" id="start-weight-unit">kg</span>
                </div>
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-warning/10 text-warning font-medium border border-warning/30 hover:bg-warning/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="5">
                    Continue
                </button>
            </div>

            <!-- Q5: Goal Weight -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="5" id="q5">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-success/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="target" class="w-6 h-6 text-success"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">What's your goal weight?</h2>
                        <p class="text-sm text-foreground-muted mt-1">We'll track your journey to get there</p>
                    </div>
                </div>
                <div class="relative">
                    <input type="number" id="goal-weight-input" placeholder="70" step="0.1"
                        class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground placeholder-foreground-muted/50 focus:outline-none focus:border-success transition-all">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-sm text-foreground-muted" id="goal-weight-unit">kg</span>
                </div>
                <!-- Weight difference indicator -->
                <div class="mt-3 p-3 rounded-lg bg-success/10 border border-success/20 hidden" id="weight-diff-card">
                    <div class="flex items-center gap-2">
                        <i data-lucide="trending-down" class="w-5 h-5 text-success"></i>
                        <span class="text-sm text-success font-medium" id="weight-diff-text"></span>
                    </div>
                </div>
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-success/10 text-success font-medium border border-success/30 hover:bg-success/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="6">
                    Continue
                </button>
            </div>

            <!-- Q6: Treatment Start -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="6" id="q6">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-primary/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="calendar" class="w-6 h-6 text-primary"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">When did you start treatment?</h2>
                        <p class="text-sm text-foreground-muted mt-1">The date you began Mounjaro</p>
                    </div>
                </div>
                <input type="date" id="treatment-date-input"
                    class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground focus:outline-none focus:border-primary transition-all">
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-primary/10 text-primary font-medium border border-primary/30 hover:bg-primary/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="7">
                    Continue
                </button>
            </div>

            <!-- Q7: First Injection Date -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="7" id="q7">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-violet/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="calendar-check" class="w-6 h-6 text-violet"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">When was your first injection?</h2>
                        <p class="text-sm text-foreground-muted mt-1">We'll calculate your schedule from this</p>
                    </div>
                </div>
                <input type="date" id="injection-date-input"
                    class="w-full px-4 py-4 bg-background border-2 border-border rounded-xl text-lg text-foreground focus:outline-none focus:border-violet transition-all">
                <button class="answer-btn mt-4 w-full py-3 rounded-xl bg-violet/10 text-violet font-medium border border-violet/30 hover:bg-violet/20 transition-all opacity-50 cursor-not-allowed" disabled data-next="8">
                    Continue
                </button>
            </div>

            <!-- Q8: Dose -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="8" id="q8">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-violet/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="pill" class="w-6 h-6 text-violet"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">What dose did you take?</h2>
                        <p class="text-sm text-foreground-muted mt-1">Your first injection dosage</p>
                    </div>
                </div>
                <div class="grid grid-cols-3 gap-2">
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="2.5">
                        <span class="text-2xl font-bold text-foreground">2.5</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="5.0">
                        <span class="text-2xl font-bold text-foreground">5.0</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="7.5">
                        <span class="text-2xl font-bold text-foreground">7.5</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="10.0">
                        <span class="text-2xl font-bold text-foreground">10</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="12.5">
                        <span class="text-2xl font-bold text-foreground">12.5</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                    <button class="option-btn dose-opt p-4 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all flex flex-col items-center" data-dose="15.0">
                        <span class="text-2xl font-bold text-foreground">15</span>
                        <span class="text-xs text-foreground-muted">mg</span>
                    </button>
                </div>
            </div>

            <!-- Q9: Injection Site -->
            <div class="question-card bg-background-card rounded-2xl p-5 border border-border opacity-40" data-q="9" id="q9">
                <div class="flex items-start gap-4 mb-4">
                    <div class="w-12 h-12 rounded-xl bg-violet/15 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="map-pin" class="w-6 h-6 text-violet"></i>
                    </div>
                    <div>
                        <h2 class="text-lg font-semibold text-foreground">Where did you inject?</h2>
                        <p class="text-sm text-foreground-muted mt-1">Track injection site rotation</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2">
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="abdomen_left">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-violet/15 flex items-center justify-center">
                                <i data-lucide="arrow-left" class="w-4 h-4 text-violet"></i>
                            </div>
                            <span class="text-sm font-medium">Abdomen Left</span>
                        </div>
                    </button>
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="abdomen_right">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-violet/15 flex items-center justify-center">
                                <i data-lucide="arrow-right" class="w-4 h-4 text-violet"></i>
                            </div>
                            <span class="text-sm font-medium">Abdomen Right</span>
                        </div>
                    </button>
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="thigh_left">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-blue/15 flex items-center justify-center">
                                <i data-lucide="arrow-left" class="w-4 h-4 text-blue"></i>
                            </div>
                            <span class="text-sm font-medium">Thigh Left</span>
                        </div>
                    </button>
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="thigh_right">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-blue/15 flex items-center justify-center">
                                <i data-lucide="arrow-right" class="w-4 h-4 text-blue"></i>
                            </div>
                            <span class="text-sm font-medium">Thigh Right</span>
                        </div>
                    </button>
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="arm_left">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-amber/15 flex items-center justify-center">
                                <i data-lucide="arrow-left" class="w-4 h-4 text-amber"></i>
                            </div>
                            <span class="text-sm font-medium">Arm Left</span>
                        </div>
                    </button>
                    <button class="option-btn site-opt p-3 rounded-xl border-2 border-border bg-background hover:border-violet/50 transition-all" data-site="arm_right">
                        <div class="flex items-center gap-2">
                            <div class="w-8 h-8 rounded-full bg-amber/15 flex items-center justify-center">
                                <i data-lucide="arrow-right" class="w-4 h-4 text-amber"></i>
                            </div>
                            <span class="text-sm font-medium">Arm Right</span>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Completion Card -->
            <div class="question-card bg-gradient-to-br from-success/20 to-success/5 rounded-2xl p-6 border-2 border-success/30 opacity-40 hidden" id="complete-card">
                <div class="text-center">
                    <div class="w-20 h-20 rounded-full bg-success/20 flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="check-circle-2" class="w-10 h-10 text-success"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-foreground mb-2">You're all set!</h2>
                    <p class="text-foreground-muted mb-6">Your profile is ready. Let's start tracking your journey.</p>
                    <button id="final-submit" class="w-full py-4 rounded-xl bg-success text-background font-semibold text-lg hover:opacity-90 transition-all flex items-center justify-center gap-2">
                        <i data-lucide="rocket" class="w-5 h-5"></i>
                        Start Tracking
                    </button>
                </div>
            </div>
        </main>

        <!-- Fixed Bottom Progress -->
        <div class="fixed bottom-0 left-0 right-0 bg-background/95 backdrop-blur border-t border-border/30 py-3 px-4">
            <div class="max-w-lg mx-auto">
                <div class="h-1 bg-background-secondary rounded-full overflow-hidden mb-2">
                    <div id="main-progress" class="h-full bg-gradient-to-r from-primary via-violet to-success transition-all duration-500" style="width: 11%"></div>
                </div>
                <p class="text-xs text-center text-foreground-muted" id="progress-label">Getting to know you...</p>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();

        const totalQuestions = 9;
        let currentQuestion = 1;
        let answers = {};

        // Initialize dot progress
        function initDots() {
            const dotContainer = document.getElementById('dot-progress');
            dotContainer.innerHTML = '';
            for (let i = 1; i <= totalQuestions; i++) {
                const dot = document.createElement('div');
                dot.className = `w-2 h-2 rounded-full transition-all ${i === 1 ? 'bg-primary w-4' : 'bg-background-secondary'}`;
                dot.id = `dot-${i}`;
                dotContainer.appendChild(dot);
            }
        }
        initDots();

        function updateProgress() {
            const percent = Math.round((Object.keys(answers).length / totalQuestions) * 100);
            document.getElementById('main-progress').style.width = `${percent}%`;
            document.getElementById('question-counter').textContent = `${currentQuestion} of ${totalQuestions}`;

            // Update dots
            for (let i = 1; i <= totalQuestions; i++) {
                const dot = document.getElementById(`dot-${i}`);
                if (answers[i]) {
                    dot.className = 'w-2 h-2 rounded-full bg-success transition-all';
                } else if (i === currentQuestion) {
                    dot.className = 'w-2 h-2 rounded-full bg-primary w-4 transition-all';
                } else {
                    dot.className = 'w-2 h-2 rounded-full bg-background-secondary transition-all';
                }
            }

            // Update progress label
            const labels = {
                1: 'Getting to know you...',
                2: 'Almost there with basics...',
                3: 'Great! Now your measurements...',
                4: 'Setting your starting point...',
                5: 'Defining your goal...',
                6: 'Tracking your timeline...',
                7: 'Logging your first injection...',
                8: 'Recording the dose...',
                9: 'Final details...'
            };
            document.getElementById('progress-label').textContent = labels[currentQuestion] || 'Almost done!';
        }

        function goToQuestion(num) {
            // Mark previous as answered
            const prev = document.getElementById(`q${currentQuestion}`);
            prev.classList.remove('current', 'pulse');
            prev.classList.add('answered');

            currentQuestion = num;

            // Activate new question
            const next = document.getElementById(`q${num}`);
            if (next) {
                next.classList.remove('opacity-40', 'answered');
                next.classList.add('current', 'pulse');
                next.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            updateProgress();

            // Show completion card if done
            if (num > totalQuestions) {
                document.getElementById('complete-card').classList.remove('hidden', 'opacity-40');
                document.getElementById('complete-card').classList.add('current');
                document.getElementById('complete-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        function enableButton(qNum) {
            const btn = document.querySelector(`#q${qNum} .answer-btn`);
            if (btn) {
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                btn.disabled = false;
            }
        }

        // Age input
        document.getElementById('age-input').addEventListener('input', (e) => {
            const val = parseInt(e.target.value);
            if (val >= 18 && val <= 120) {
                answers[1] = val;
                enableButton(1);
            }
        });

        // Gender selection
        document.querySelectorAll('.gender-opt').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.gender-opt').forEach(b => {
                    b.classList.remove('border-primary', 'bg-primary/10', 'selected');
                });
                btn.classList.add('border-primary', 'bg-primary/10', 'selected');
                answers[2] = btn.dataset.value;
                setTimeout(() => goToQuestion(3), 300);
            });
        });

        // Height toggle
        document.querySelectorAll('.height-toggle').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.height-toggle').forEach(b => {
                    b.classList.remove('bg-primary', 'text-background');
                    b.classList.add('bg-background-secondary', 'text-foreground-muted');
                });
                btn.classList.add('bg-primary', 'text-background');
                btn.classList.remove('bg-background-secondary', 'text-foreground-muted');

                const isCm = btn.dataset.unit === 'cm';
                document.getElementById('height-cm-input').classList.toggle('hidden', !isCm);
                document.getElementById('height-ft-input').classList.toggle('hidden', isCm);
                document.getElementById('height-ft-input').classList.toggle('grid', !isCm);
            });
        });

        document.getElementById('height-input').addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            if (val >= 100 && val <= 250) {
                answers[3] = val;
                enableButton(3);
            }
        });

        // Weight toggle
        document.querySelectorAll('.weight-toggle').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.weight-toggle').forEach(b => {
                    b.classList.remove('bg-primary', 'text-background');
                    b.classList.add('bg-background-secondary', 'text-foreground-muted');
                });
                btn.classList.add('bg-primary', 'text-background');
                btn.classList.remove('bg-background-secondary', 'text-foreground-muted');

                const unit = btn.dataset.unit;
                document.getElementById('start-weight-unit').textContent = unit;
                document.getElementById('goal-weight-unit').textContent = unit;
            });
        });

        document.getElementById('start-weight-input').addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            if (val > 0) {
                answers[4] = val;
                enableButton(4);
                updateWeightDiff();
            }
        });

        document.getElementById('goal-weight-input').addEventListener('input', (e) => {
            const val = parseFloat(e.target.value);
            if (val > 0) {
                answers[5] = val;
                enableButton(5);
                updateWeightDiff();
            }
        });

        function updateWeightDiff() {
            const start = answers[4] || 0;
            const goal = answers[5] || 0;
            if (start && goal && start > goal) {
                const diff = start - goal;
                document.getElementById('weight-diff-card').classList.remove('hidden');
                document.getElementById('weight-diff-text').textContent = `You're aiming to lose ${diff.toFixed(1)} kg`;
            }
        }

        document.getElementById('treatment-date-input').addEventListener('change', (e) => {
            if (e.target.value) {
                answers[6] = e.target.value;
                enableButton(6);
            }
        });

        document.getElementById('injection-date-input').addEventListener('change', (e) => {
            if (e.target.value) {
                answers[7] = e.target.value;
                enableButton(7);
            }
        });

        // Dose selection
        document.querySelectorAll('.dose-opt').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.dose-opt').forEach(b => {
                    b.classList.remove('border-violet', 'bg-violet/15', 'selected');
                });
                btn.classList.add('border-violet', 'bg-violet/15', 'selected');
                answers[8] = btn.dataset.dose;
                setTimeout(() => goToQuestion(9), 300);
            });
        });

        // Site selection
        document.querySelectorAll('.site-opt').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.site-opt').forEach(b => {
                    b.classList.remove('border-violet', 'bg-violet/15', 'selected');
                });
                btn.classList.add('border-violet', 'bg-violet/15', 'selected');
                answers[9] = btn.dataset.site;
                setTimeout(() => goToQuestion(10), 300);
            });
        });

        // Continue button handlers
        document.querySelectorAll('.answer-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const nextQ = parseInt(btn.dataset.next);
                goToQuestion(nextQ);
            });
        });

        // Final submit
        document.getElementById('final-submit').addEventListener('click', () => {
            console.log('Answers:', answers);
            alert('Onboarding complete! Redirecting to dashboard...');
        });

        // Set max dates
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('treatment-date-input').max = today;
        document.getElementById('injection-date-input').max = today;
    </script>
</body>
</html>
